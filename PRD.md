# Bizi 요구사항 정의서 (PRD)

> 상태: ✅ 구현완료 | 🔧 구현중 | ❌ 미구현

## 1. 사용자 관리

### 1.1 인증 - 회원가입
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UM-002 | 소셜 로그인 (Google) | Google OAuth2 기반 회원가입 | 상 | ✅ | Google OAuth2만 구현 |

### 1.2 인증 - 로그인
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UM-011 | 소셜 로그인 | Google 소셜 계정 로그인 | 상 | ✅ | |
| REQ-UM-012 | 로그아웃 | 세션 종료 및 로그아웃 기능 | 상 | ✅ | 토큰 블랙리스트 |
| REQ-UM-013 | 자동 로그인 | 토큰 기반 자동 로그인 유지 | 중 | ✅ | Refresh token rotation |

### 1.3 프로필 - 기본정보
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UM-021 | 프로필 조회 | 사용자 프로필 정보 조회 | 상 | ✅ | |
| REQ-UM-022 | 프로필 수정 | 이름, 연락처, 주소 등 기본정보 수정 | 상 | ❌ | |
| REQ-UM-023 | 사용자 구분 설정 | 예비 창업자/스타트업 CEO/중소기업 사장 구분 선택 | 상 | ✅ | PUT /users/me/type |
| REQ-UM-024 | 회원 탈퇴 | 계정 삭제 및 데이터 처리 | 중 | ✅ | Soft delete (use_yn) |

---

## 2. 관리자

### 2.1 사용자 관리 - 회원 관리
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-AD-001 | 회원 목록 조회 | 전체 회원 목록 조회 및 검색 | 상 | ❌ | 관리자 대시보드에 미포함 |
| REQ-AD-002 | 회원 상세 조회 | 개별 회원 상세정보 조회 | 상 | ❌ | |
| REQ-AD-003 | 회원 상태 변경 | 회원 활성화/비활성화/정지 처리 | 상 | ❌ | |

### 2.2 모니터링 - 상담 이력
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-AD-011 | 상담 로그 조회 | 전체 상담 이력 로그 조회 | 상 | ✅ | GET /admin/histories |
| REQ-AD-012 | 로그 검색/필터 | 날짜, 사용자, 도메인별 로그 검색 | 상 | ✅ | HistoryFilterBar |
| REQ-AD-013 | 로그 상세 보기 | 개별 상담 대화 내역 상세 조회 | 상 | ✅ | HistoryDetailModal |

### 2.3 모니터링 - 통계/리포트
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-AD-021 | 사용 통계 대시보드 | 일별/주별/월별 사용 통계 시각화 | 상 | ✅ | AdminDashboardPage |
| REQ-AD-022 | 도메인별 통계 | 상담 도메인별 이용 현황 통계 | 상 | ✅ | histories/stats |

---

## 3. 멀티에이전트 시스템

### 3.1 Master Router - 입력 분석
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-MR-001 | 메시지 분류 | 사용자 입력을 4개 도메인으로 분류 | 상 | ✅ | LLM + 키워드 + 벡터 유사도 |
| REQ-MR-002 | 에이전트 할당 | 분류된 도메인에 맞는 전문 에이전트 자동 할당 | 상 | ✅ | LangGraph StateGraph |
| REQ-MR-003 | 복합질문 처리 | 여러 도메인 동시 호출이 필요한 복합 질문 감지 및 처리 | 상 | ✅ | 멀티도메인 병렬 검색 |
| REQ-MR-004 | 사용자 구분 반영 | 예비 창업자/CEO 등 사용자 유형에 따른 맞춤 라우팅 | 상 | ✅ | user_context 전달 |
| REQ-MR-005 | 에이전트 직접 선택 | 사용자가 도메인 에이전트를 직접 선택하여 질문 | 중 | ❌ | |

### 3.2 Master Router - 크로스도메인
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-MR-101 | Cross-Domain 연결 | 에이전트 간 결과 전달 (예: 채용→지원사업) | 중 | ✅ | 법률 보충 검색 구현 |
| REQ-MR-102 | 컨텍스트 공유 | 에이전트 간 컨텍스트 정보 공유 인터페이스 | 중 | ✅ | RouterState 공유 |

### 3.3 Startup Agent (창업)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-SA-001 | 사업자 등록 안내 | 개인/법인 사업자 등록 절차 및 필요서류 안내 | 상 | ✅ | VectorDB RAG |
| REQ-SA-002 | 법인 설립 안내 | 법인 설립 절차, 비용, 필요서류 상세 안내 | 상 | ✅ | |
| REQ-SA-003 | 업종별 인허가 | 업종별 필요 인허가 및 신고 사항 안내 | 상 | ✅ | industry_startup_guide |
| REQ-SA-004 | 창업 체크리스트 | 단계별 창업 준비 체크리스트 제공 | 중 | ✅ | startup_procedures |
| REQ-SA-011 | 업종 코드 검색 | 표준산업분류 업종 코드 검색 및 안내 | 상 | ✅ | KSIC 코드 기반 |
| REQ-SA-012 | 업종별 특성 | 업종별 창업 시 고려사항 및 특성 안내 | 중 | ✅ | |

### 3.4 Tax Agent (세무/회계)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-TA-001 | 세금 종류 안내 | 법인세, 부가세, 원천세 등 세금 종류별 안내 | 상 | ✅ | VectorDB RAG |
| REQ-TA-002 | 신고/납부 일정 | 세금 신고 및 납부 기한 안내 | 상 | ✅ | |
| REQ-TA-003 | 세금 계산 가이드 | 세금 계산 방법 및 절세 팁 안내 | 중 | ✅ | |
| REQ-TA-004 | 세무 FAQ | 자주 묻는 세무 질문 답변 | 중 | ✅ | |
| REQ-TA-011 | 회계 기초 안내 | 복식부기, 간편장부 등 기초 회계 안내 | 상 | ✅ | |
| REQ-TA-012 | 재무제표 이해 | 재무제표 항목별 의미 및 해석 안내 | 중 | ✅ | |

### 3.5 Funding Agent (지원사업)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-FA-001 | 기업마당 API 연동 | 기업마당 Open API를 통한 정부지원사업 데이터 수집 | 상 | ✅ | announcement_collector |
| REQ-FA-002 | K-Startup API 연동 | K-Startup Open API를 통한 스타트업 지원사업 데이터 수집 | 상 | ✅ | |
| REQ-FA-101 | 공고 벡터화 | 수집된 공고문을 임베딩하여 벡터DB에 저장 | 상 | ✅ | startup_funding_db |
| REQ-FA-102 | 자동 갱신 | 공고 변경/추가 시 벡터DB 자동 업데이트 | 상 | ✅ | |
| REQ-FA-201 | 기업조건 매칭 | 업력, 업종 조건에 맞는 공고 필터링 | 상 | ✅ | 벡터 검색 + 조건 필터 |
| REQ-FA-203 | 최신순 기반 정렬 | 최근 올라온 공고를 기준으로 정렬 | 상 | ✅ | |

### 3.6 HR Agent (노무)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-HR-001 | 근로기준법 DB | 근로기준법 전문 벡터DB 구축 및 검색 | 상 | ✅ | hr_labor_db |
| REQ-HR-002 | 시행령/시행규칙 | 관련 시행령, 시행규칙 데이터 연동 | 상 | ✅ | laws_full에 포함 |
| REQ-HR-011 | 채용/해고 상담 | 채용 및 해고 관련 법적 절차 안내 | 상 | ✅ | |
| REQ-HR-012 | 근로시간/휴가 | 근로시간, 연차휴가 관련 법규 안내 | 상 | ✅ | |
| REQ-HR-013 | 임금/퇴직금 | 임금 체계, 퇴직금 계산 등 안내 | 상 | ✅ | |

### 3.7 Legal Agent (법률)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-LA-001 | 상법 기초 | 회사 운영 관련 상법 기초 안내 | 상 | ✅ | law_common_db |
| REQ-LA-002 | 계약법 안내 | 계약서 작성 시 주의사항 및 법률 안내 | 상 | ✅ | |
| REQ-LA-003 | 지식재산권 | 특허, 상표, 저작권 등 지재권 기초 안내 | 중 | ✅ | |
| REQ-LA-004 | 분쟁 대응 가이드 | 법적 분쟁 발생 시 대응 절차 안내 | 중 | ✅ | |

### 3.8 Action Executor (문서 생성)
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-AE-001 | 근로계약서 생성 | 표준 근로계약서 초안 자동 생성 (PDF) | 상 | ✅ | PDF + DOCX |
| REQ-AE-002 | 근로계약서 필수항목 검증 | 근로계약서 필수 포함 항목 5가지 자동 검증 | 상 | ✅ | |
| REQ-AE-003 | 취업규칙 생성 | 사업장 규모별 취업규칙 템플릿 생성 | 상 | ❌ | |
| REQ-AE-004 | 연차관리 문서 | 연차휴가 관리대장 및 촉진 통보서 생성 | 상 | ❌ | |
| REQ-AE-005 | 급여명세서 양식 | 급여명세서 양식 생성 및 항목 안내 | 상 | ❌ | |
| REQ-AE-011 | 사업계획서 템플릿 | 지원사업 신청용 사업계획서 템플릿 생성 | 중 | ✅ | DOCX |
| REQ-AE-012 | IR 자료 템플릿 | 투자유치용 IR 피칭덱 템플릿 생성 | 하 | ❌ | |
| REQ-AE-101 | PDF 변환 | 생성된 문서를 PDF 형식으로 출력 | 상 | ✅ | ReportLab |
| REQ-AE-102 | HWP 변환 | 한글(hwp) 형식 문서 출력 지원 | 중 | ❌ | |

---

## 4. 알림 시스템

### 4.1 이벤트 트리거 - 마감일 트리거
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-PA-101 | D-7 알림 | 공고 마감 7일 전 알림 발송 | 중 | ✅ | |
| REQ-PA-102 | D-3 알림 | 공고 마감 3일 전 긴급 알림 발송 | 상 | ✅ | |
| REQ-PA-103 | 신규 공고 알림 | 관심 조건에 맞는 새로운 공고 등록 시 알림 | 상 | ❌ | |

### 4.2 알림 채널 - 웹 알림
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-PA-202 | 답변 완료 알림 | AI 답변 생성 완료 시 인앱 알림 | 상 | 🔧 | 프론트엔드 토스트만 |
| REQ-PA-203 | 알림 설정 관리 | 사용자별 알림 수신 설정 관리 | 중 | ❌ | |

---

## 5. 기업 프로필

### 5.1 기업정보 관리 - 기본정보
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-CP-001 | 프로필 등록 | 업력, 매출, 업종, 직원수, 주소 등 기업 기본정보 등록 | 상 | ✅ | |
| REQ-CP-002 | 프로필 수정 | 정보 변경 시 업데이트 기능 | 상 | ✅ | |
| REQ-CP-003 | 사업자등록번호 조회 | 사업자등록번호 입력으로 기업정보 자동 조회 | 중 | ❌ | |

### 5.2 기업정보 관리 - 자격 분석
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-CP-101 | 지원자격 자동분석 | 등록된 정보로 지원사업 자격요건 자동 분석 | 상 | ❌ | |
| REQ-CP-102 | 매칭 스코어 | 기업-지원사업 간 적합도 점수 산출 | 중 | ❌ | |

---

## 6. 플랫폼 UI

### 6.1 웹 UI - 메인 채팅
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UI-001 | 통합 채팅 인터페이스 | 모든 도메인 질문을 자연어로 처리하는 단일 채팅창 | 상 | ✅ | |
| REQ-UI-002 | 도메인 표시 | AI 응답 시 도메인 태그 표시 | 중 | ✅ | DomainTag |
| REQ-UI-003 | 복합응답 구분 | 복합 질문 시 도메인별 응답 섹션 구분 표시 | 중 | ✅ | 멀티도메인 배지 |
| REQ-UI-004 | 대화 이력 | 이전 대화 내역 조회 및 이어서 질문 | 상 | ✅ | ChatHistoryPanel |

### 6.2 웹 UI - 사이드바
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UI-101 | 빠른 질문 버튼 | 사용자 구분별 자주 묻는 질문 바로가기 | 상 | ✅ | 계절별 + 업종별 |
| REQ-UI-102 | 알림 센터 | 선제 알림 확인 및 관리 인터페이스 | 중 | ✅ | NotificationBell |
| REQ-UI-103 | 기업 프로필 요약 | 현재 기업 조건 요약 표시 | 중 | ✅ | CompanyDashboard |

### 6.3 웹 UI - 반응형
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-UI-201 | 모바일 대응 | 모바일 환경 반응형 UI 지원 | 상 | ✅ | TailwindCSS + useMediaQuery |

---

## 7. 보안

### 7.1 데이터 보안 - 암호화
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-SC-002 | 민감정보 암호화 | 기업 민감정보 AES-256 암호화 저장 | 상 | 🔧 | 확인 필요 |
| REQ-SC-003 | 통신 암호화 | HTTPS/TLS 기반 통신 암호화 | 상 | ✅ | Nginx SSL |

### 7.2 데이터 보안 - 접근 제어
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-SC-011 | JWT 인증 | JWT 토큰 기반 API 인증 | 상 | ✅ | HttpOnly Cookie |
| REQ-SC-012 | 세션 관리 | 세션 타임아웃 및 동시 로그인 제어 | 중 | ✅ | |
| REQ-SC-013 | 관리자 권한 분리 | 일반 사용자와 관리자 권한 분리 | 상 | ✅ | require_admin() |

---

## 8. 검증/평가

### 8.1 정확도 측정 - Router 평가
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-EV-001 | 분류 정확도 | 4개 도메인 할당 정확도 측정 | 상 | ✅ | 벡터 유사도 벤치마크 |

### 8.2 정확도 측정 - RAG 평가
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-EV-101 | 공고 요약 정확도 | 공고문 요약의 사실 일치 여부 검증 | 상 | ✅ | RAGAS faithfulness |
| REQ-EV-102 | 법령 답변 정확도 | 법령 기반 답변의 정확성 검증 | 상 | ✅ | RAGAS + LLM 평가 |

### 8.3 정확도 측정 - 문서 평가
| ID | 기능 | 상세 설명 | 우선순위 | 상태 | 비고 |
|----|------|----------|----------|------|------|
| REQ-EV-201 | 항목 충족도 | 생성된 문서 필수항목 충족 검증 | 중 | ✅ | 근로계약서 5대 항목 |

---

## 구현 현황 요약

| 상태 | 개수 | 비율 |
|------|------|------|
| ✅ 구현완료 | 70 | ~80% |
| 🔧 구현중 | 2 | ~2% |
| ❌ 미구현 | 15 | ~17% |
| **합계** | **87** | |

### 미구현 주요 항목
- **알림 시스템**: 신규 공고 알림, 알림 설정 관리 (REQ-PA-103, 203)
- **문서 생성 확장**: 취업규칙, 연차관리, 급여명세서, HWP 형식 (REQ-AE-003~005, 102)
- **기업 자격 분석**: 사업자등록번호 조회, 자동 자격 분석, 매칭 스코어 (REQ-CP-003, 101~102)
- **회원 관리**: 관리자 회원 CRUD (REQ-AD-001~003)
- **에이전트 선택**: 사용자 직접 도메인 선택 (REQ-MR-005)
