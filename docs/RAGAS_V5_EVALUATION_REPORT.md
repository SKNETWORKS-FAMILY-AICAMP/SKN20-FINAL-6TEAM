# RAGAS v5 평가 리포트

> 평가일: 2026-02-26 | 데이터셋: `qa_test/ragas_dataset_v5.jsonl` | 결과: `qa_test/ragas_results_v5.json`

---

## 1. 평가 개요

Bizi RAG 챗봇의 답변 품질을 [RAGAS](https://docs.ragas.io/) 프레임워크로 정량 평가한 결과입니다.

### 평가 환경

| 항목 | 설정 |
|------|------|
| 테스트 질문 수 | 30개 (11개 페르소나, 15개 도메인 조합) |
| 임베딩 | RunPod Serverless (BAAI/bge-m3) |
| 리랭킹 | RunPod Serverless (bge-reranker-base) |
| LLM (답변 생성) | GPT-4o |
| LLM (RAGAS 평가) | GPT-4o-mini |
| 벡터DB | ChromaDB (95,031 문서) |
| 검색 방식 | Hybrid Search (BM25 + Vector + RRF) |
| 질문당 타임아웃 | 300초 |

### RAGAS 메트릭 설명

| 메트릭 | 의미 | 좋은 점수 |
|--------|------|----------|
| **Faithfulness** (충실도) | 답변이 검색된 문서 내용에만 근거하는가? (높을수록 환각 적음) | 0.8 이상 |
| **Answer Relevancy** (답변 관련성) | 답변이 질문에 정확히 대응하는가? (높을수록 초점이 맞음) | 0.8 이상 |
| **Context Precision** (컨텍스트 정밀도) | 검색된 문서 중 실제로 관련 있는 비율 (검색 정확도) | 0.8 이상 |
| **Context Recall** (컨텍스트 재현율) | 정답에 필요한 정보를 얼마나 빠짐없이 검색했는가? | 0.8 이상 |
| **Context F1** | Precision과 Recall의 조화평균 (검색 종합 성능) | 0.8 이상 |
| **RAGAS Score** | 전체 메트릭의 조화평균 (종합 점수) | 0.8 이상 |

---

## 2. 전체 결과

```
                    RAGAS Score: 0.7624
```

| 메트릭 | 점수 | 판정 |
|--------|------|------|
| Faithfulness | **0.6519** | 개선 필요 |
| Answer Relevancy | **0.7122** | 개선 필요 |
| Context Precision | **0.8615** | 양호 |
| Context Recall | **0.8051** | 양호 |
| Context F1 | **0.8212** | 양호 |

- 30/30 질문 완료 (타임아웃 0건)
- 평균 응답 시간: **27.3초/질문**

### 해석

- **검색 성능은 우수** — 관련 문서를 정확하게(86%) 빠짐없이(81%) 찾아옴
- **답변 생성이 약점** — 검색된 문서 외 정보를 답변에 포함하는 경향 (Faithfulness 65%)
- **답변 초점 분산** — 질문 대비 불필요한 내용이 포함됨 (Answer Relevancy 71%)

---

## 3. 도메인별 분석

### 단일 도메인 (8건)

| ID | 도메인 | 난이도 | Faith. | Ans.Rel. | Ctx.Prec. | Ctx.Rec. | F1 |
|----|--------|--------|--------|----------|-----------|----------|-----|
| V5-001 | 인사노무 | Easy | 1.00 | 0.54 | 0.92 | 1.00 | 0.96 |
| V5-002 | 인사노무 | Medium | 0.83 | 0.57 | 1.00 | 0.88 | 0.93 |
| V5-003 | 재무세무 | Easy | 0.58 | 0.83 | 0.83 | 0.73 | 0.77 |
| V5-004 | 재무세무 | Medium | 0.71 | 0.57 | 0.37 | 0.60 | 0.45 |
| V5-005 | 창업지원 | Easy | 0.57 | 0.88 | 1.00 | 0.56 | 0.71 |
| V5-006 | 창업지원 | Medium | 0.81 | 0.79 | 0.79 | 0.73 | 0.76 |
| V5-007 | 법률 | Medium | 0.62 | 0.82 | 0.79 | 0.75 | 0.77 |
| V5-008 | 법률 | Hard | 0.56 | 0.72 | 1.00 | 0.33 | 0.50 |

### 복합 도메인 — 2개 (12건)

| ID | 도메인 | 난이도 | Faith. | Ans.Rel. | Ctx.Prec. | Ctx.Rec. | F1 |
|----|--------|--------|--------|----------|-----------|----------|-----|
| V5-009 | 인사+세무 | Easy | 0.56 | 0.80 | 0.60 | 0.55 | 0.57 |
| V5-010 | 인사+세무 | Medium | 0.53 | 0.89 | 1.00 | 0.73 | 0.84 |
| V5-011 | 인사+창업 | Easy | 0.80 | 0.68 | 0.71 | 0.80 | 0.75 |
| V5-012 | 인사+창업 | Medium | 0.46 | 0.63 | 0.63 | 0.64 | 0.63 |
| V5-013 | 인사+법률 | Medium | 0.10 | 0.55 | 1.00 | 1.00 | 1.00 |
| V5-014 | 인사+법률 | Hard | 0.78 | 0.82 | 1.00 | 1.00 | 1.00 |
| V5-015 | 세무+창업 | Easy | 0.57 | 0.65 | 0.87 | 0.92 | 0.89 |
| V5-016 | 세무+창업 | Medium | 0.67 | 0.83 | 0.98 | 0.69 | 0.81 |
| V5-017 | 세무+법률 | Medium | 0.59 | 0.62 | 0.93 | 0.82 | 0.87 |
| V5-018 | 세무+법률 | Hard | 0.20 | 0.63 | 1.00 | 0.91 | 0.95 |
| V5-019 | 창업+법률 | Medium | 0.89 | 0.68 | 0.91 | 0.91 | 0.91 |
| V5-020 | 창업+법률 | Medium | 0.55 | 0.65 | 0.90 | 0.91 | 0.90 |

### 복합 도메인 — 3~4개 (10건)

| ID | 도메인 | 난이도 | Faith. | Ans.Rel. | Ctx.Prec. | Ctx.Rec. | F1 |
|----|--------|--------|--------|----------|-----------|----------|-----|
| V5-021 | 인사+세무+창업 | Medium | 0.58 | 0.65 | 0.73 | 0.83 | 0.78 |
| V5-022 | 인사+세무+창업 | Hard | 0.88 | 0.71 | 0.69 | 0.86 | 0.77 |
| V5-023 | 인사+세무+법률 | Medium | 0.75 | 0.71 | 0.75 | 0.58 | 0.66 |
| V5-024 | 인사+세무+법률 | Hard | 0.74 | 0.84 | 0.89 | 1.00 | 0.94 |
| V5-025 | 인사+창업+법률 | Medium | 0.70 | 0.64 | 0.85 | 0.92 | 0.88 |
| V5-026 | 인사+창업+법률 | Hard | 0.89 | 0.65 | 1.00 | 1.00 | 1.00 |
| V5-027 | 세무+창업+법률 | Medium | 0.75 | 0.70 | 1.00 | 1.00 | 1.00 |
| V5-028 | 세무+창업+법률 | Hard | 0.41 | 0.87 | 0.80 | 0.85 | 0.82 |
| V5-029 | 4도메인 전체 | Hard | 0.93 | 0.74 | 0.92 | 0.83 | 0.88 |
| V5-030 | 4도메인 전체 | Hard | 0.55 | 0.69 | 1.00 | 0.85 | 0.92 |

---

## 4. 난이도별 분석

| 난이도 | 질문 수 | Faithfulness | Answer Rel. | Ctx Precision | Ctx Recall | F1 |
|--------|---------|-------------|-------------|---------------|------------|-----|
| Easy | 7 | 0.68 | 0.72 | 0.81 | 0.74 | 0.76 |
| Medium | 15 | 0.65 | 0.71 | 0.87 | 0.81 | 0.83 |
| Hard | 8 | 0.64 | 0.71 | 0.93 | 0.86 | 0.89 |

- Hard 질문의 **검색 성능이 가장 높음** (F1 0.89) — 복합 도메인 질문에서 크로스도메인 검색이 효과적
- **Faithfulness는 난이도와 무관하게 낮음** — 답변 생성 단계의 구조적 문제

---

## 5. 주요 발견사항

### 강점

1. **크로스도메인 검색 우수** — 3~4개 도메인 복합 질문에서도 Context F1 0.86 유지
2. **타임아웃 0건** — 30개 질문 모두 300초 내 응답 완료 (평균 27초)
3. **Context Precision 높음** — 검색된 문서의 86%가 실제 관련 문서

### 약점 (개선 필요)

| 문제 | 현재 | 목표 | 원인 분석 |
|------|------|------|----------|
| **Faithfulness 낮음** | 0.65 | 0.80+ | LLM이 검색 문서 외 자체 지식으로 답변 생성 (환각) |
| **Answer Relevancy 낮음** | 0.71 | 0.80+ | 질문과 무관한 부가 정보가 답변에 포함 |
| **V5-013 환각 심각** | 0.10 | - | 정리해고 질문에서 검색은 완벽(F1=1.0)이나 답변이 문서와 불일치 |
| **V5-018 환각 심각** | 0.20 | - | 통합투자세액공제 질문에서 유사 현상 |

### 최저 성능 질문 (Faithfulness 기준)

| ID | 질문 요약 | Faith. | 원인 |
|----|----------|--------|------|
| V5-013 | 경영상 정리해고 절차 | 0.10 | 검색 완벽, 답변 생성 실패 |
| V5-018 | 통합투자세액공제 | 0.20 | 세법 수치를 자체 지식으로 생성 |
| V5-028 | 온라인쇼핑몰 종합 상담 | 0.41 | 복합 도메인에서 정보 혼합 |

---

## 6. 개선 방향

### 단기 (프롬프트/설정 조정)

1. **프롬프트에 "반드시 검색된 문서만 참조" 강조** — Faithfulness 개선
2. **답변 길이 제한 또는 핵심 요약 유도** — Answer Relevancy 개선
3. **검색 문서에 없는 내용은 "확인 필요" 표시 유도** — 환각 방지

### 중기 (데이터/검색 개선)

4. **JSONL 데이터 정제** — domain 필드 불일치, 메타데이터 잔여물 제거
5. **청킹 파라미터 최적화** — chunk_size 1500, overlap 200~250으로 조정
6. **법률 데이터 Context Recall 개선** — V5-008 법률 단일 도메인 Recall 0.33

### 장기 (아키텍처)

7. **답변 후처리 검증 강화** — 생성된 답변과 검색 문서 간 교차 검증
8. **도메인별 전문 프롬프트 분리** — 세무/법률 등 정확도가 중요한 도메인

---

## 7. 테스트 데이터셋 구성

### 페르소나 (11종)

| 페르소나 | 업종 | 사용 질문 수 |
|---------|------|------------|
| 네일아트 샵 사장님 | 미용업 | 3 |
| IT 스타트업 CEO | IT서비스 | 3 |
| 빵집 창업 준비생 | 제과점 | 2 |
| 의류 수출 기업 대표 | 제조·수출 | 3 |
| 한식당 사장님 | 음식점 | 2 |
| 코딩 학원 설립자 | 교육 | 3 |
| 유기농 온라인쇼핑몰 | 식품·이커머스 | 3 |
| 건축설계사무소 대표 | 건축·설계 | 2 |
| 물류 스타트업 CEO | 물류 | 2 |
| 반도체 부품 기업 대표 | 제조·R&D | 3 |
| 헬스장 창업자 | 체육시설 | 2 |

### 도메인 조합 (15종)

| 도메인 유형 | 조합 수 | 질문 수 |
|------------|---------|---------|
| 단일 도메인 | 4 (hr, tax, startup, law) | 8 |
| 2개 도메인 | 6 (hr+tax, hr+startup, ...) | 12 |
| 3개 도메인 | 4 (hr+tax+startup, ...) | 8 |
| 4개 도메인 | 1 (hr+tax+startup+law) | 2 |

### 난이도 분포

| 난이도 | 질문 수 | 설명 |
|--------|---------|------|
| Easy | 7 | 단일 주제, 명확한 답 |
| Medium | 15 | 복합 주제, 조건부 답변 |
| Hard | 8 | 다중 도메인, 전문 지식 필요 |

---

## 8. 수행 시간

| 단계 | 소요 시간 |
|------|----------|
| RunPod 워커 예열 | 6초 |
| ChromaDB 컬렉션 로드 | 2초 |
| BM25 인덱스 빌드 | 38분 (law_common 80K 문서 = 33분) |
| RAG 질문 처리 (30건) | 12분 (평균 27초/건) |
| RAGAS 평가 (120 항목) | 45분 |
| **총 소요 시간** | **약 1시간 35분** |
