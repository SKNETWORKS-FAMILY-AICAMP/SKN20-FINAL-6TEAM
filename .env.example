# ===================
# Bizi 환경 변수
# ===================

# ===================
# DB 모드 선택
# - 로컬 DB: docker-compose -f docker-compose.local.yaml up --build
# - AWS DB:  docker-compose up --build
# ===================

# MySQL Database (AWS RDS) — docker-compose.yaml 에서 사용
# RDS 엔드포인트 예시: bizi-db.xxxxx.ap-northeast-2.rds.amazonaws.com
MYSQL_HOST=
MYSQL_PORT=3306

# Bastion Host (SSH 터널용 EC2 탄력적 IP) — AWS 모드에서만 필요
BASTION_HOST=
MYSQL_DATABASE=bizi_db
MYSQL_USER=
MYSQL_PASSWORD=

# 로컬 MySQL — docker-compose.local.yaml 에서 사용
# MYSQL_ROOT_PASSWORD=bizi1234
# MYSQL_USER=bizi
# MYSQL_PASSWORD=bizi1234

# JWT (Backend) — 필수, 32자 이상
# 생성: python -c "import secrets; print(secrets.token_urlsafe(48))"
JWT_SECRET_KEY=
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie
COOKIE_SECURE=false
COOKIE_SAMESITE=lax

# Test Login (set to true to enable /auth/test-login endpoint)
ENABLE_TEST_LOGIN=true

# Google OAuth2 (미구현 - 테스트 로그인 사용)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# OpenAI (RAG 서비스용)
OPENAI_API_KEY=your-openai-api-key

# External APIs (지원사업 연동)
BIZINFO_API_KEY=your-bizinfo-api-key
KSTARTUP_API_KEY=your-kstartup-api-key

# RAG API Key (설정 시 RAG 엔드포인트 인증 활성화, 비워두면 비활성화)
# 생성: python -c "import secrets; print(secrets.token_urlsafe(32))"
RAG_API_KEY=

# Frontend (Docker+Nginx: /api, /rag | 로컬: http://localhost:8000, http://localhost:8001)
VITE_API_URL=/api
VITE_RAG_URL=/rag

# RAG Service Toggle
RAG_ENABLED=true  # Set to "false" to disable RAG service

# ===================
# RAG Feature Flags (ON/OFF 토글)
# ===================

# 검색 파이프라인
ENABLE_HYBRID_SEARCH=true
ENABLE_RERANKING=true
# ENABLE_CONTEXT_COMPRESSION=false
# ENABLE_ADAPTIVE_SEARCH=true
# ENABLE_DYNAMIC_K=true
# ENABLE_FIXED_DOC_LIMIT=true
# ENABLE_CROSS_DOMAIN_RERANK=true
# ENABLE_LEGAL_SUPPLEMENT=true

# 도메인 분류
# ENABLE_DOMAIN_REJECTION=true
ENABLE_VECTOR_DOMAIN_CLASSIFICATION=true
ENABLE_LLM_DOMAIN_CLASSIFICATION=false

# 평가 & 재시도
# ENABLE_LLM_EVALUATION=true
# ENABLE_RAGAS_EVALUATION=false
# ENABLE_POST_EVAL_RETRY=true
# ENABLE_GRADUATED_RETRY=true

# 인프라
# ENABLE_RESPONSE_CACHE=true
# ENABLE_RATE_LIMIT=true
# ENABLE_FALLBACK=true

# 생성
# ENABLE_ACTION_AWARE_GENERATION=true

# ===================
# RAG Pipeline Parameters
# ===================
VECTOR_SEARCH_WEIGHT=0.7
MULTI_QUERY_COUNT=3
MIN_DOC_EMBEDDING_SIMILARITY=0.2
RERANKER_TYPE=cross-encoder
CROSS_ENCODER_MODEL=BAAI/bge-reranker-base

# RAGAS 평가 모델 (기본값 사용 시 설정 불필요)
# RAGAS_LLM_MODEL=gpt-4o-mini
# RAGAS_EMBEDDING_MODEL=text-embedding-3-small
# RAGAS_MAX_TOKENS=8192

# 로그 레벨
# LOG_LEVEL=INFO

# Frontend RAG Streaming
VITE_RAG_STREAMING=true

UPSTAGE_API_KEY=
