# 에이전트 선택 가이드

> 이 문서는 작업 유형별 적절한 에이전트를 선택하기 위한 가이드입니다.

## PM Orchestrator (최상위 에이전트)

복합 기능 요청이나 멀티서비스 작업 시 **pm-orchestrator**를 사용합니다.

### 언제 사용하는가
- 2개 이상 서비스에 걸친 기능 구현 (backend + frontend + rag)
- 복합 요구사항 (API + UI + DB 스키마 + 테스트 모두 필요)
- 큰 범위의 리팩토링 (여러 모듈에 영향)
- "기능 만들어줘" 류의 포괄적 요청

### 언제 사용하지 않는가
- 단순 버그 수정 (단일 파일, 몇 줄 변경)
- 단일 서비스 내 소규모 변경 → 해당 전문 에이전트 직접 호출
- 빠른 질문/답변, 파일 검색/코드 읽기

### 워크플로우
```
1. 요구사항 분석 → 프로젝트 현황 파악, 영향 범위 식별
2. 작업 분해 → 서브태스크 생성, 에이전트 매핑, 사용자 승인
3. 에이전트 위임 → 병렬/순차 실행, 컨텍스트 전달
4. 품질 보증 → 코드 리뷰, 테스트, 크로스 서비스 검증
5. 완료 보고 → 변경 사항 요약, 커밋 대기
```

### 사용 예시
| 요청 | PM 동작 |
|------|--------|
| "지원사업 알림 기능 만들어줘" | backend API + frontend UI + rag 연동 조율 |
| "기업 프로필에 매출 정보 추가" | DB 스키마 + backend + frontend + rag 전체 조율 |
| "인증 시스템 리팩토링" | 영향 범위 분석 → 단계별 리팩토링 계획 → 서브에이전트 위임 |

---

## 에이전트 유형 비교

| 에이전트 | 용도 | 도구 접근 |
|---------|------|----------|
| `Explore` | 코드베이스 탐색, 파일 검색, 구조 이해 | Glob, Grep, Read |
| `Plan` | 구현 전략 설계, 아키텍처 결정 | 읽기 전용 도구 |
| `Bash` | Git 작업, 명령 실행 | Bash |
| `general-purpose` | 복잡한 멀티스텝 작업, 코드 검색 | 모든 도구 |

## 작업별 권장 에이전트

### 탐색/검색 작업

| 작업 | 권장 에이전트 | 예시 |
|------|-------------|------|
| 파일 위치 찾기 | `Explore` (quick) | "API 엔드포인트 파일 찾아줘" |
| 코드 구조 파악 | `Explore` (medium) | "인증 흐름 설명해줘" |
| 전체 아키텍처 이해 | `Explore` (very thorough) | "프로젝트 구조 분석해줘" |
| 특정 함수/클래스 | Glob 직접 사용 | "class UserService 찾아줘" |

### 계획/설계 작업

| 작업 | 권장 에이전트 | 예시 |
|------|-------------|------|
| 기능 구현 전략 | `Plan` | "새 API 엔드포인트 설계해줘" |
| 리팩토링 계획 | `Plan` | "인증 로직 모듈화 계획" |
| 복잡한 버그 분석 | `Plan` | "동시성 이슈 해결 방안" |

### 실행 작업

| 작업 | 권장 에이전트/도구 | 예시 |
|------|------------------|------|
| Git 작업 | `Bash` | "커밋 생성해줘" |
| 테스트 실행 | `Bash` | "pytest 실행해줘" |
| 빌드/배포 | `Bash` | "docker compose up" |

### 복합 작업

| 작업 | 권장 에이전트 | 예시 |
|------|-------------|------|
| 기능 구현 (탐색+코딩) | `general-purpose` | "로그인 기능 구현해줘" |
| 버그 수정 (분석+수정) | `general-purpose` | "이 에러 수정해줘" |
| 문서 생성 | `general-purpose` | "API 문서 작성해줘" |

## 탐색 깊이 선택 (Explore)

| 깊이 | 사용 시점 | 예상 시간 |
|------|----------|----------|
| `quick` | 단순 파일/함수 검색 | ~10초 |
| `medium` | 기능 흐름 파악 | ~30초 |
| `very thorough` | 전체 아키텍처 분석 | ~1분+ |

## 에이전트 협업 패턴

### 패턴 1: 탐색 후 계획
```
1. Explore (medium) → 현재 구조 파악
2. Plan → 구현 전략 수립
3. 직접 코딩 또는 general-purpose
```

### 패턴 2: 빠른 수정
```
1. Glob/Grep → 파일 위치 특정
2. Read → 코드 확인
3. Edit → 직접 수정
```

### 패턴 3: 복잡한 기능 구현
```
1. Explore (very thorough) → 관련 코드 전체 파악
2. Plan → 단계별 계획 수립
3. general-purpose (병렬) → 여러 파일 동시 작업
```

### 패턴 4: PM 오케스트레이션 (멀티서비스)
```
1. pm-orchestrator → 요구사항 분석 + 작업 분해
2. 전문 에이전트 (병렬) → backend/frontend/rag 동시 작업
3. code-reviewer → 전체 코드 리뷰
4. 테스트 실행 → 서비스별 + 크로스 서비스 검증
```

## 우선순위 규칙

1. **단순 검색**: Glob/Grep 직접 사용 (에이전트 불필요)
2. **파일 읽기**: Read 직접 사용 (에이전트 불필요)
3. **코드베이스 탐색**: Explore 에이전트
4. **복잡한 작업**: general-purpose 에이전트
5. **계획 필요**: Plan 에이전트

## 참고

- 에이전트는 병렬 실행 가능 (독립적인 작업인 경우)
- 에이전트 결과는 사용자에게 직접 보이지 않음 → 요약 필요
- 민감한 작업(force push 등)은 에이전트에 위임하지 않음
